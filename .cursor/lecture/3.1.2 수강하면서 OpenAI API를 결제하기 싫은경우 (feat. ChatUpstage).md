# **수강하면서 OpenAI API를 결제하기 싫은경우 (feat. ChatUpstage)**

---

# **Upstage Solar API 대안**

1. OpenAI API는 최소 $5 결제가 필요
2. Upstage는 가입 시 무료 크레딧을 제공하므로 결제 없이 실습 가능
3. LangChain에서 `ChatOpenAI` 대신 `ChatUpstage`로 교체하면 동일한 방식으로 사용 가능

---

# **환경 설정**

1. 패키지 설치
    ```bash
    pip install python-dotenv langchain-upstage
    ```
2. Upstage API 키 발급
    - https://console.upstage.ai 에서 회원가입
    - API Keys 메뉴에서 키 발급
3. `.env` 파일에 추가
    ```
    UPSTAGE_API_KEY=up_...
    ```

---

# **코드**

```python
from dotenv import load_dotenv
load_dotenv()

import os
from langchain_upstage import ChatUpstage

llm = ChatUpstage(api_key=os.getenv("UPSTAGE_API_KEY"))
ai_message = llm.invoke("인프런에 어떤 강의가 있나요?")
ai_message.content
```

- `ChatUpstage()`는 기본 모델로 `solar-mini`를 사용
- `solar-mini`가 Upstage에서 가장 저렴한 모델 (입출력 모두 $0.15 / 1M tokens)
- `ChatOpenAI`와 동일하게 `invoke()`, `content` 등 LangChain 인터페이스를 그대로 사용

---

# **OpenAI vs Upstage 비용 비교**

| provider | model | input (1M tokens) | output (1M tokens) |
|---|---|---|---|
| OpenAI | gpt-4o-mini | $0.15 | $0.60 |
| Upstage | solar-mini | $0.15 | $0.15 |

- 토큰 단가는 비슷하지만, Upstage는 무료 크레딧으로 시작 가능
- 강의 실습 목적이라면 Upstage 무료 크레딧만으로 충분
